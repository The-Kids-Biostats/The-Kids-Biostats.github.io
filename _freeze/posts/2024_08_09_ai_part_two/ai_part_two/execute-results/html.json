{
  "hash": "307f9db464baf8371b98772ab1f4eb36",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"AI in Biostatistics - Part 2\"\noutput: html_document\ndate: \"2024-08-09\"\nauthor: \"Wesley Billingham, Dr Matthew Cooper\"\ncategories:\n  - AI\n  - R\ndraft: false\n---\n\n::: {.cell}\n\n:::\n\n\n# Overview\n\nIf you haven't read part one of this two-part series on AI, do that first here:\n\n<https://the-kids-biostats.github.io/posts/2024_08_08_ai_part_one/ai_part_one.html>\n\nLast time we looked at three cases where our use of AI aided our productivity and gave us the desired result. In this post, we'll be looking at the other side of the coin, to situations where AI has struggled and where attempts to pursue its use would hinder our productivity and have us produced errors.\n\nTo demonstrate this, we'll look through the results of a few published papers and the concepts they introduce. Then, as a wrap of Part 1 and 2, we propose some guidelines that can be used to maximise ones efficiency when using (or thinking about using) AI.\n\n# Examples\n\n## Example 1 - Jagged Frontier\n\nOur first example is drawn from a 2023 paper which looked at the effect of AI use on productivity and quality of work. You can read the paper here:\n\n<https://papers.ssrn.com/sol3/papers.cfm?abstract_id=4573321>\n\nIt introduces a very helpful concept - the 'Jagged Frontier'. Below we use ggplot2 to demonstrate this idea.\n\n### What is the Jagged Frontier?\n\nImagine you have 5 tasks to complete today, and you are trying to decide which of these you can delegate to AI (in this case, ChatGPT). You might have in mind that each task has some implicit difficulty associated with it (rated 1- 10), and your perception of current AI technology is that in is capable of tackling tasks up to a difficulty of 5. This is represented by the blue dashed line below.\n\nYour 5 tasks have various difficulties, represented by the black points. At this point, based on your perception of the difficulty of your tasks and the capability of AI, you would assign tasks 2, 3 and 5 to ChatGPT, since these have a difficulty of \\<=5.\n\nUnfortunately, the reality is that our perception of difficulty does not line up well with AI's capabilities. As we have seen in the last post, it can complete some pretty incredible tasks, such as coding Shiny apps and performing advanced statistical analyses. But as we will also see later, it can struggle with some pretty mundane tasks.\n\nAnd so the capability of AI cannot be measured by the blue dashed line, but rather the red, *jagged* line, a seemingly random level of capability which is unrelated to our ideas of difficulty. This is what is referred to as the \"Jagged Frontier\".\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](ai_part_two_files/figure-html/unnamed-chunk-2-1.png){width=1152}\n:::\n:::\n\n\n### Why should we care?\n\nWhen a task can successfully be completed using AI, we refer to that task as being 'Inside the Frontier'; that is, below the red jagged line above. When AI would struggle or be unable to complete a task, we refer to that as being 'Outside the Frontier'.\n\nThe study above set out to investigate the difference in worker productivity when AI is used for tasks considered 'Inside the Frontier' compared with those considered 'Outside the Frontier'. A large study was set up, with the following methodology:\n\n1.  All 758 participants (experts in the relevant field) complete a baseline project without any AI use. Speed and quality are measured.\n2.  Participants are randomised into one of four groups (see table below).\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Metric </th>\n   <th style=\"text-align:right;\"> Inside.Frontier </th>\n   <th style=\"text-align:right;\"> Outside.Frontier </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> ChatGPT </td>\n   <td style=\"text-align:right;\"> 189 </td>\n   <td style=\"text-align:right;\"> 190 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> ChatGPT + Overview </td>\n   <td style=\"text-align:right;\"> 190 </td>\n   <td style=\"text-align:right;\"> 189 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n3.  Those in the \"Inside Frontier\" group were assigned a project that had been determined beforehand to be within the capabilities of ChatGPT 3.5. In contrast, the \"Outside Frontier\" group were assigned a project beyond the capabilities of ChatGPT 3.5.\n4.  The participants were further divided into \"ChatGPT\" and \"ChatGPT + Overview\" groups. The latter received some training on prompt engineering (how be to use ChaptGPT) before undertaking the project.\n5.  All participants completed their project, and their speed and quality was compared to their own individual baseline score.\n\nThe results are quite striking:\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Metric </th>\n   <th style=\"text-align:left;\"> Inside.Frontier </th>\n  </tr>\n </thead>\n<tbody>\n  <tr grouplength=\"2\"><td colspan=\"2\" style=\"border-bottom: 1px solid;\"><strong>ChatGPT</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Speed </td>\n   <td style=\"text-align:left;\"> 28% </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Quality </td>\n   <td style=\"text-align:left;\"> 38% </td>\n  </tr>\n  <tr grouplength=\"2\"><td colspan=\"2\" style=\"border-bottom: 1px solid;\"><strong>ChatGPT + Overview</strong></td></tr>\n<tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Speed </td>\n   <td style=\"text-align:left;\"> 23% </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;padding-left: 2em;\" indentlevel=\"1\"> Quality </td>\n   <td style=\"text-align:left;\"> 43% </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\nUsing ChatGPT for the project 'Inside the Frontier' resulted in considerable improvements in both speed and quality of work, regardless of whether participants received training.\n\nBut perhaps more interestingly, the groups with projects 'Outside the Frontier' saw a decrease in quality of work, even though the work was completed faster...\n\nWe will return to these results in the discussion below.\n\n## Example 2 - Biostatistical Questions\n\nAs promised, we are going to investigate some examples of tasks that lie 'Outside the Frontier'. These examples are drawn from this paper:\n\n<https://www.ncbi.nlm.nih.gov/pmc/articles/PMC10646144/>\n\nAs a brief summary, 10 different biostatistics-related problems were posed to ChatGPT 3.5 and subsequently to ChatGPT 4.0. For each problem, the team attempted up to three times to get the correct answer from the AI. The results are below:\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](ai_part_two_files/figure-html/unnamed-chunk-5-1.png){width=1152}\n:::\n:::\n\n\nWhile, ChatGPT 4.0 made significant improvements on 3.5, 40% of answers were still incorrect on the first attempt.\n\nWe attempted to reproduce one of these results, using their Question 2, which was:\n\n*\"Suppose the probability of surviving from a particular disease is 0.9 and there are 20 patients. The number surviving will follow a Binomial distribution with p=0.9 and n=20. What is the probability that no more than 1 patient dies?\"*\n\nThe expected answer to this question is 39.2%, and there are two ways we could get this answer in R using the *pbinom* function:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsize <- 20 # Number of trials\nprob <- 0.1 # Probability of *dying*\n\npbinom(1, size, prob)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.391747\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nprob <- 0.9 # Probability of *surviving*\n\n1 - pbinom(18, size, prob)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.391747\n```\n\n\n:::\n:::\n\n\nGraphically, we can highlight the area of the distribution we are interested in calculating - this will be helpful later to compare with ChatGPT's responses.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](ai_part_two_files/figure-html/unnamed-chunk-8-1.png){width=1056}\n:::\n:::\n\n\n## First Attempt:\n\nBelow is our prompt history with ChatGPT 4.0 as we attempted to reproduce the results from the paper - namely, using a maximum of three attempts to get the correct answer.\n\n::: callout-note\n## Note.\n\nHighlighted sections and markings were added for emphasis and to assist with the live presentation that these two blog posts have been adapted from.\n:::\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](reproduced_q1.PNG){fig-align='center' width=700px}\n:::\n:::\n\n\nOn ChatGPT's first attempt, it gives us an answer of 87.8%, a far cry from 39.2%! The blue icon at the end of its answer reveals the Python code it used to generate this answer, however we asked it to provide the equivalent code in R:\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](reproduced_q2.PNG){fig-align='center' width=700px}\n:::\n:::\n\n\nWe can run the code here to verify the answer:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nn <- 20 # number of trials\np <- 0.9 # probability of success\n\nprob <- pbinom(19, n, p)\n\nprob\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.8784233\n```\n\n\n:::\n:::\n\n\nInterestingly, the `binom` package is not actually used!\n\nThe AI has seemingly 'understood' the question, as shown by its correct inference that \"no more than 1 patient dies\" is equivalent to \"at least 19 patients surviving\" in its code documentation. However, the code provided has gotten things the wrong way around.\n\nAbove, we showed the correct area of the distribution we are interested in. Now we can see this side by side with what the AI code is calculating:\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](ai_part_two_files/figure-html/unnamed-chunk-12-1.png){width=1056}\n:::\n:::\n\n\n## Second Attempt\n\nIn the paper, the way in which ChatGPT was prompted to try again at a particular problem was to simply say \"I got <correct answer>\". We do the same here:\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](reproduced_q3.PNG){fig-align='center' width=700px}\n:::\n:::\n\n\nWe see that the AI has doubled down and is suggesting ***we*** have misunderstood the question. It describes the problem back to us perfectly, with one exception:\n\n\"The focus should be on the cumulative probability of having *up to* 19 survivors.\"\n\nWhile this is incorrect, it is the first time anything it has *said* has matched the calculation it carried out.\n\n## Third Attempt\n\nWith final attempt, it is up for debate whether the response is correct or not:\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](reproduced_q5.PNG){fig-align='center' width=700px}\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](reproduced_q6.PNG){fig-align='center' width=700px}\n:::\n:::\n\n\nThe code it provides does give the correct answer now, however there is still a 'belief' that 0.392 was and is incorrect.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nn <- 20 # number of trials\np <- 0.9 # probability of success\n\nprob_no_more_than_1_dying <- pbinom(1, n, 1- p)\n\nprint(prob_no_more_than_1_dying)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.391747\n```\n\n\n:::\n:::\n\n\n## Takeaway\n\nWithout knowing how `pbinom` works (and even then, noticing it had been implemented incorrectly!), it is likely that a user would trust the initial incorrect answer. The AI showed signs of *understanding* the question, the code documentation *made sense*, and the code itself *looked* completely plausible...\n\nHow much more so for more complicated scenarios?\n\n# Discussion\n\nWhen we presented this material to researchers at the Institute, our objective was to steer listeners away from the two extreme attitudes they might take towards AI use in their work.\n\nThe [first extreme]{.underline} is to not use AI whatsoever. As we have clearly seen from part one of this blog series, and the results of the 'jagged frontier' study, the increases in productivity can be astonishing. If any tool increases our work speed by 30-40% while maintaining or even improving quality, it ought to be used.\n\nThe [second extreme]{.underline} is the overuse and/or over-reliance on AI. Some tasks are simply outside the current capabilities of AI (not to say they will remain so in the future). To use AI in such circumstances wastes time at best, and at worst produces inaccuracies that remain unnoticed by us - will the reader of our work know? The worked biostatistics example above shows how easy it is to be convinced by the confident language of AI as it repeats an answer that is patently incorrect.\n\n## Where to from here? Our recommendations...\n\nThe 'jagged frontier' of AI is invisible to us, and hence we often cannot know whether the task we are about to delegate is within its capability or not (and it doesn't know!). For this reason, we propose the following guidelines to ensure you are using AI effectively and responsibly:\n\n1.  You should be able to verify the output is true/accurate.\n2.  The time it would take to verify the AI output should be less than the time it would take to achieve the same output yourself.\n\nLooking back at our examples throughout the two posts:\n\n### Weather plot\n\nIn this example, we could verify the more complex plot by visually comparing it to simple plots we coded ourselves. Additionally, we could understand the R code that AI produced. Whether the use of AI in this case was justified or not depends on how quickly we could have remembered all the ggplot2 commands to do this ourselves!\n\n### Statistical Analysis\n\nFor the statistical analysis, we were well-placed to verify the suggestions of ChatGPT. However, this would be a dangerous use-case for someone who is unfamiliar with statistical methodology - advanced or otherwise. We know that the suggested hierarchical mixed models is a good suggestion, but this would not be immediately verifiable to everyone. Therefore we would recommend against this use-case for non-statisticians.\n\n### Shiny App\n\nThis is probably the best example of AI saving time and increasing quality. The objective is simple - a Shiny App which takes and randomises data. Even as someone who has never coded a Shiny App before, it is easy to verify whether it works by simply using the app.\n\n### Mathematical Questions\n\nFinally, we have seen that AI can make mistakes when calculating numerical results, and remain confidently incorrect in the face of correction. To verify the answer requires working line by line through each piece of code to ensure it is doing what we asked. Hence it is unlikely to save us time and seemingly likely to be incorrect.\n\n# Conclusion\n\nThese two posts have been a summation of our thoughts as they have developed through the first year or so of incorporating AI into our workflows. We have sought to experiment with different prompts to see where we can use AI to improve our productivity and where it hampers it. The two guidelines above have been helpful to avoid our over-reliance on AI, and our experiences with effective AI have helped to avoid under-utilisation.\n\nWe'd love to hear your thoughts and ideas on these two posts. Do you disagree with our recommendations and/or conclusions? Or perhaps you have some additional ones you would like to suggest.\n\n## Further reading\n\nA similar paper to Example 2, testing responses to a set of 70 medical questions: https://onlinelibrary.wiley.com/doi/full/10.1111/iej.13985\n\nDespite the humourous title, a fascinating paper on where Artificial Intelligence is, well, intelligent: https://link.springer.com/article/10.1007/s10676-024-09775-5\n",
    "supporting": [
      "ai_part_two_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}